<!DOCTYPE html>
<html>

<head>
    <meta name="keywords" content="{{range .Tags}}{{.}},{{end}}">
    <meta name="description" content="{{.Title}}">
    <meta name="author" content="{{.Author.Name}}">
    <title>{{.Title}}</title>
    <link href="/src/main.css" rel="stylesheet">
    <link href="/src/article.css" rel="stylesheet">
</head>

<body class="bg-blue-50">
    <!-- 导航栏和背景横幅 -->
    {{template "header" .}}

    <!-- 内容区域 - 向上移动遮住横幅底部 -->
    <div class="relative z-20 md:max-w-6xl mx-auto -mt-32 pt-8">
        <div class="flex flex-col md:flex-row gap-8">
            <main class="w-full md:w-2/3 lg:w-3/4 md:order-2 space-y-4">
                <!-- 正文内容区域 -->
                <article class="bg-white dark:bg-gray-800 rounded-xl p-8">
                    <!-- 标题组：包含线和标题 -->
                    <div class="flex items-start gap-4 mb-4">
                        <div class="w-1 h-5 bg-blue-500 self-center rounded-full"></div>
                        <h1 class="text-3xl font-bold text-gray-900 dark:text-white">{{.Title}}</h1>
                    </div>
                    <!-- 元信息 -->
                    <div
                        class="flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-gray-500 dark:text-gray-400 mb-6">
                        <div class="flex items-center gap-1.5">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            <span class="date-parser" data-timestamp="{{.Date}}" />
                        </div>
                        <div class="flex items-center gap-1.5">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="8" r="4" />
                                <path d="M4 20c0-4 4-6 8-6s8 2 8 6" />
                            </svg>
                            <span>{{.Author.Name}}</span>
                        </div>
                        <!-- 标签 -->
                        <div class="flex items-center gap-1.5 flex-wrap">
                            <span class="font-semibold text-blue-500">#</span>
                            {{range .Tags}}
                            <a href="/tag/{{.}}/index.html" class="px-1.5 py-2 cream-button before:z-10"><span
                                    class="z-40">{{.}}</span></a>
                            {{end}}
                        </div>
                    </div>
                    <!-- 封面图片（如有） -->
                    {{if .Cover}}
                    <img src="{{.Cover}}" alt="封面图片" class="w-full max-h-96 object-cover rounded-xl mb-8"
                        onerror="this.onerror=null;this.src='https://placehold.co/800x400/e0e0e0/757575?text=Image+Error';">
                    {{end}}
                    <!-- 分割线 -->
                    <div class="border-[rgba(0,0,0,.08)] border-dashed border-b-[1px] mb-5"></div>
                    <!-- 正文内容 -->
                    <div class="cream-prose">
                        {{.Content}}
                    </div>
                </article>

                <!-- 文章导航 - 独立卡片 -->
                <div class="flex flex-col gap-4 md:flex-row">
                    {{if .Prev}}
                    <a href="/{{.Prev.Link}}"
                        class="group flex-1 bg-white dark:bg-gray-800 rounded-xl p-6 hover:bg-gray-100 dark:hover:bg-blue-900 transition-all duration-200 active:scale-95">
                        <div class="flex items-center gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                class="h-6 w-6 text-gray-400 group-hover:text-blue-500 transition-colors" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                            </svg>
                            <div class="flex-1">
                                <div class="text-sm text-gray-500 dark:text-gray-400 mb-1">上一篇文章</div>
                                <div class="font-semibold text-gray-900 dark:text-white transition-colors">
                                    {{.Prev.Title}}</div>
                            </div>
                        </div>
                    </a>
                    {{else}}
                    <div class="flex-1 bg-white dark:bg-gray-800 rounded-xl p-6 opacity-50">
                        <div class="flex items-center gap-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                            </svg>
                            <div class="flex-1">
                                <div class="text-sm text-gray-500 dark:text-gray-400 mb-1">上一篇文章</div>
                                <div class="font-semibold text-gray-500 dark:text-gray-400">已是最新文章</div>
                            </div>
                        </div>
                    </div>
                    {{end}}

                    {{if .Next}}
                    <a href="/{{.Next.Link}}"
                        class="group flex-1 bg-white dark:bg-gray-800 rounded-xl p-6 hover:bg-gray-100 dark:hover:bg-blue-900 transition-all duration-200 active:scale-95">
                        <div class="flex items-center gap-3">
                            <div class="flex-1 text-right">
                                <div class="text-sm text-gray-500 dark:text-gray-400 mb-1">下一篇文章</div>
                                <div class="font-semibold text-gray-900 dark:text-white transition-colors">
                                    {{.Next.Title}}</div>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg"
                                class="h-6 w-6 text-gray-400 group-hover:text-blue-500 transition-colors" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                            </svg>
                        </div>
                    </a>
                    {{else}}
                    <div class="flex-1 bg-white dark:bg-gray-800 rounded-xl p-6 opacity-50">
                        <div class="flex items-center gap-3">
                            <div class="flex-1 text-right">
                                <div class="text-sm text-gray-500 dark:text-gray-400 mb-1">下一篇文章</div>
                                <div class="font-semibold text-gray-500 dark:text-gray-400">已是最早文章</div>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                            </svg>
                        </div>
                    </div>
                    {{end}}
                </div>
            </main>
            <!-- 
              左侧栏: 个人信息卡片
              - 在 `md` 及以上断点，通过 `md:order-1` 将其排在左侧。
              - 在移动端，由于父容器是 `flex-col`，它会自然显示在主内容下方。
            -->
            <aside class="w-full md:w-1/3 lg:w-1/4 md:order-1">
                {{template "profile" .}}
            </aside>
        </div>
    </div>

    <!-- 页脚信息 -->
    {{template "footer" .}}
</body>
<script type="module" src="/src/main.ts"></script>
<script type="module" src="/src/article.ts"></script>

</html>